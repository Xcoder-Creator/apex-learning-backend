(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1017:function(e,t,o){"use strict";o(937)},1018:function(e,t,o){var r=o(26)(!1);r.push([e.i,"#cmr_txt[data-v-a20902a4]{margin-left:6px;font-size:1.2rem;margin-top:3px}",""]),e.exports=r},1061:function(e,t,o){"use strict";o.r(t);o(29);var r=o(45),c=(o(101),o(21),o(31),o(38),o(322),o(57),{name:"DeleteClassworkDialog",mixins:[{methods:{delete_classwork_operation:function(e,t){var o=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,l,_,n,m,d,k,w,v,h,f,$,x;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!0!==o.$store.state.teacher_streams_page.stream_comp.refresh_data){r.next=16;break}return o.$store.commit("teacher_streams_page/stream_comp/update_loading_linear",{value:!0}),o.$store.commit("teacher_streams_page/stream_comp/update_refresh_data",{value:!1}),o.$store.commit("teacher_classwork_page/classwork_comp/update_classwork_fetched",{value:!1}),o.$store.commit("teacher_classwork_page/classwork_comp/empty_classwork_for_class",{class_code:t}),o.delete_classwork_loading=!0,c=o.$config.environment,l=null,"development"===c?l={method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("refresh_token"))},body:new URLSearchParams({access_token:localStorage.getItem("access_token"),class_code:t,classwork_id:e}),signal:o.controller.signal}:"production"===c&&(_=o.$store.state.app_tokens.login_access_token,l={method:"POST",headers:{Authorization:"Bearer ".concat(_)},body:new URLSearchParams({class_code:t,classwork_id:e}),signal:o.controller.signal}),r.next=12,o.delete_classwork_request(l);case 12:!0===(n=r.sent).status?"error"===(m=o.delete_classwork_response(n.result)).status?(o.$store.commit("teacher_streams_page/stream_comp/update_loading_linear",{value:!0}),o.$store.commit("teacher_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("teacher_classwork_page/classwork_comp/update_classwork_fetched",{value:!1}),o.delete_classwork_loading=!1,o.$store.commit("dialog/delete_classwork_dialog/reset_data"),d={value:!0,msg:"Couldn't delete classwork!",err:!0},o.$store.commit(o.$config.VUEX_UPDATE_ERR_MSG_DIALOG,d)):"token_expired"===m.status?("development"===(k=o.$config.environment)?(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")):"production"===k&&o.$store.commit("app_tokens/update_login_access_token",{value:null}),o.$store.commit("page_loading/page_loading/update_data",{value:!0}),o.$store.commit("app_components/reset_data"),o.$store.commit("class_details/reset_data"),o.$store.commit("student_streams_page/stream_comp/reset_data"),o.$store.commit("user_details/user_details/reset_data"),o.$router.push("/login/")):"success"===m.status?(null!==m.new_access_token&&("development"===(w=o.$config.environment)?localStorage.setItem("access_token",m.new_access_token):"production"===w&&o.$store.commit("app_tokens/update_login_access_token",{value:m.new_access_token})),o.delete_classwork_loading=!1,o.$store.commit("dialog/delete_classwork_dialog/reset_data"),"classworks_available"===m.state?(o.$store.commit("teacher_streams_page/stream_comp/update_loading_linear",{value:!1}),o.$store.commit("teacher_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("teacher_classwork_page/classwork_comp/add_new_classwork",{class_code:m.class_code,classworks:m.classworks}),o.$store.commit("teacher_classwork_page/classwork_comp/update_classwork_fetched",{value:!0})):"no_classworks"===m.state&&(o.$store.commit("teacher_streams_page/stream_comp/update_loading_linear",{value:!1}),o.$store.commit("teacher_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("teacher_classwork_page/classwork_comp/update_classwork_fetched",{value:"no_classwork"})),setTimeout((function(){o.$store.commit(o.$config.VUEX_UPDATE_ERR_MSG_DIALOG,{value:!0,msg:"Classwork deleted successfully!",err:!1})}),50)):"not_teacher_of_class"===m.status?(null!==m.new_access_token&&("development"===(v=o.$config.environment)?localStorage.setItem("access_token",m.new_access_token):"production"===v&&o.$store.commit("app_tokens/update_login_access_token",{value:m.new_access_token})),o.page_view=!1,o.$store.commit("teacher_streams_page/stream_comp/update_loading_linear",{value:!1}),o.$store.commit("teacher_streams_page/stream_comp/update_refresh_data",{value:!1}),o.$store.commit("teacher_classwork_page/classwork_comp/update_classwork_fetched",{value:!1}),o.$store.commit("teacher_classwork_page/classwork_comp/empty_classwork_for_class",{class_code:t}),o.$router.push(o.$config.teacher_classesUrl)):"class_does_not_exist"===m.status?(null!==m.new_access_token&&("development"===(h=o.$config.environment)?localStorage.setItem("access_token",m.new_access_token):"production"===h&&o.$store.commit("app_tokens/update_login_access_token",{value:m.new_access_token})),o.page_view=!1,o.$store.commit("teacher_streams_page/stream_comp/update_loading_linear",{value:!1}),o.$store.commit("teacher_streams_page/stream_comp/update_refresh_data",{value:!1}),o.$store.commit("teacher_classwork_page/classwork_comp/update_classwork_fetched",{value:!1}),o.$store.commit("teacher_classwork_page/classwork_comp/empty_classwork_for_class",{class_code:t}),o.$router.push(o.$config.teacher_classesUrl)):"role_error"===m.status?("development"===(f=o.$config.environment)?(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")):"production"===f&&o.$store.commit("app_tokens/update_login_access_token",{value:null}),o.$store.commit("page_loading/page_loading/update_data",{value:!0}),o.$store.commit("app_components/reset_data"),o.$store.commit("class_details/reset_data"),o.$store.commit("student_streams_page/stream_comp/reset_data"),o.$store.commit("user_details/user_details/reset_data"),o.$router.push("/login/")):"user_not_found"===m.status?("development"===($=o.$config.environment)?(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")):"production"===$&&o.$store.commit("app_tokens/update_login_access_token",{value:null}),o.$store.commit("page_loading/page_loading/update_data",{value:!0}),o.$store.commit("app_components/reset_data"),o.$store.commit("class_details/reset_data"),o.$store.commit("student_streams_page/stream_comp/reset_data"),o.$store.commit("user_details/user_details/reset_data"),o.$router.push("/login/")):"invalid_token"===m.status&&("development"===(x=o.$config.environment)?(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")):"production"===x&&o.$store.commit("app_tokens/update_login_access_token",{value:null}),o.$store.commit("page_loading/page_loading/update_data",{value:!0}),o.$store.commit("app_components/reset_data"),o.$store.commit("class_details/reset_data"),o.$store.commit("student_streams_page/stream_comp/reset_data"),o.$store.commit("user_details/user_details/reset_data"),o.$router.push("/login/")):!1===n.status&&"teacher-classwork"===o.$route.name&&(o.$store.commit("teacher_streams_page/stream_comp/update_loading_linear",{value:!0}),o.$store.commit("teacher_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("teacher_classwork_page/classwork_comp/update_classwork_fetched",{value:!1}),o.delete_classwork_loading=!1,o.$store.commit("dialog/delete_classwork_dialog/reset_data"),setTimeout((function(){o.$store.commit(o.$config.VUEX_UPDATE_ERR_MSG_DIALOG,{value:!0,msg:"Couldn't delete classwork!",err:!0})}),50)),r.next=17;break;case 16:o.$store.commit("dialog/msg_dialog/update_dialog",{value:!0,msg:"Can't delete classwork at this point!"});case 17:case"end":return r.stop()}}),r)})))()}}},{methods:{delete_classwork_request:function(e){var t=this;return new Promise((function(o,r){fetch("".concat(t.$config.apiUrl,"/api/v1/teacher/delete-classwork"),e).then((function(e){return e.json()})).then((function(data){o({status:!0,result:data})})).catch((function(e){o({status:!1,err:e})}))}))}}},{methods:{delete_classwork_response:function(data){if("missing_credentials"===data.status){return{status:"error"}}if("error_occured"===data.status){return{status:"error"}}if("token_expired"===data.status){return{status:"token_expired"}}if("classwork_does_not_exist"===data.status){return{status:"error"}}if("successfull"===data.status){var e="",t=null;return!0===data.result.value?e="classworks_available":!1===data.result.value&&(e="no_classworks"),"token_available"===data.token_info?t=data.new_accessToken:"no_token"===data.token_info&&(t=null),{status:"success",state:e,classworks:data.result.classworks,class_code:data.class_code,new_access_token:t}}if("not_teacher_of_class"===data.status){return{status:"not_teacher_of_class"}}if("class_does_not_exist"===data.status){var o=null;return"token_available"===data.token_info?o=data.new_accessToken:"no_token"===data.token_info&&(o=null),{status:"class_does_not_exist",new_access_token:o}}if("role_error"===data.status){return{status:"role_error"}}if("user_not_found"===data.status){return{status:"user_not_found"}}if("invalid_token"===data.status){return{status:"invalid_token"}}}}}],computed:{delete_classwork_dialog:{get:function(){return this.$store.state.dialog.delete_classwork_dialog.value},set:function(e){this.$store.commit("dialog/delete_classwork_dialog/update_dialog",{value:e})}},controller:{get:function(){return this.controller_x},set:function(e){this.controller_x=e}}},data:function(){return{delete_classwork_loading:!1,loader:"loading",loading:!0,controller_x:new AbortController}},watch:{loader:function(){this.loader},"$route.query.class_code":function(){this.delete_classwork_dialog=!1,this.delete_classwork_loading=!1,this.controller.abort(),this.controller=new AbortController}},methods:{delete_classwork:function(){var e=this.$store.state.dialog.delete_classwork_dialog.classwork_id,t=this.$store.state.dialog.delete_classwork_dialog.class_code;"teacher-classwork"===this.$route.name&&this.delete_classwork_operation(e,t)},close_dialog:function(){this.$store.commit("dialog/delete_classwork_dialog/reset_data")}},beforeDestroy:function(){this.controller.abort(),this.controller=new AbortController}}),l=(o(1017),o(147)),_=o(148),n=o.n(_),m=o(107),d=o(100),k=o(80),w=o(227),v=o(108),h=o(319),f=o(228),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-row",{attrs:{justify:"center"}},[o("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.delete_classwork_dialog,callback:function(t){e.delete_classwork_dialog=t},expression:"delete_classwork_dialog"}},[o("v-card",[o("v-card-title",{staticClass:"text-h5"},[o("v-icon",[e._v("\n                    mdi-trash-can-outline\n                ")]),e._v(" "),o("span",{attrs:{id:"cmr_txt"}},[e._v("Delete this classwork?")])],1),e._v(" "),o("v-card-text",[e._v("This classwork will be deleted permanently")]),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{staticClass:"ma-1",attrs:{color:"primary",loading:e.delete_classwork_loading,text:""},on:{click:function(t){return e.delete_classwork()}}},[e._v("\n                    Yes\n                ")]),e._v(" "),o("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.close_dialog()}}},[e._v("\n                    No\n                ")])],1)],1)],1)],1)}),[],!1,null,"a20902a4",null);t.default=component.exports;n()(component,{VBtn:m.a,VCard:d.a,VCardActions:k.a,VCardText:k.b,VCardTitle:k.c,VDialog:w.a,VIcon:v.a,VRow:h.a,VSpacer:f.a})},937:function(e,t,o){var content=o(1018);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(27).default)("b28ded14",content,!0,{sourceMap:!1})}}]);