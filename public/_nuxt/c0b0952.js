(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{566:function(e,t,o){"use strict";var r=o(45);o(101),o(29),o(14),o(57),o(21),o(31),o(38),o(322);t.a={methods:{fetch_class_list:function(e,t){var o=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var _,l,c,n,m,d,$;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"student-stream"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!1}),o.$store.commit("student_streams_page/stream_comp/update_can_create_post",{value:!1}),o.$store.commit("student_streams_page/student_stream_route_config/update_fetch_more_posts",{value:!1}),o.$store.commit("student_streams_page/stream_comp/update_spinner",{value:!1}),o.$store.commit("student_streams_page/student_stream_route_config/update_delete_class_post",{value:!1})):"student-classwork"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_loading_linear",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!1}),o.$store.commit("student_classwork_page/classwork_comp/update_classwork_fetched",{value:!1})):"student-people"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_loading_linear",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!1}),o.$store.commit("student_people_page/people_comp/update_people_data_fetched",{value:!1})):"student-archived_classes"===o.$route.name?o.$store.commit("app_components/update_loading_linear",{value:!0}):"student-view_classwork"===o.$route.name&&(o.$store.commit("student_streams_page/stream_comp/update_loading_linear",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!1}),o.$store.commit("student_view_classwork_page/classwork_details_comp/update_classwork_details_fetched",{value:!1})),_=null,l=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(_){var l,c,n,m,d,$,v,f,h,k,w,A,E,U;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.$store.commit("app_components/update_loading_linear",{value:!0}),t.next=3,o.fetch_class_list_fetch_request(_);case 3:!0===(l=t.sent).status?(c=o.fetch_class_list_response(l.result),o.$store.commit("app_components/update_loading_linear",{value:!0}),"error"===c.status?(o.$store.commit("unenroll_from_class/update_started_unenroll",{value:!1}),"student-classes"===(n=o.$route.name)||"student-settings"===n||"student-archived_classes"===n?(o.$store.commit("classes_home_page/utils/update_value",{value:!0}),"development"===(m=o.$config.environment)?(d={value:!0,text:c.msg},o.$store.commit(o.$config.VUEX_UPDATE_SNACKBAR,d)):"production"===m&&(!0===c.for_prod?(o.$store.commit("app_tokens/update_login_access_token",{value:null}),o.$store.commit("user_details/user_details/reset_data"),o.$store.commit("class_details/reset_data"),o.$store.commit("app_components/reset_data"),o.$store.commit("unenroll_from_class/update_unenroll_from_class",{value:!1}),o.$store.commit("unenroll_from_class/update_started_unenroll",{value:!1}),o.$store.commit(o.$config.VUEX_PAGE_LOADING_UPDATE_DATA,{value:!0}),o.$router.push("/login/")):($={value:!0,text:c.msg},o.$store.commit(o.$config.VUEX_UPDATE_SNACKBAR,$)))):(v={value:!0,text:c.msg},o.$store.commit(o.$config.VUEX_UPDATE_SNACKBAR,v),"student-stream"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_can_create_post",{value:!1}),o.$store.commit("student_streams_page/student_stream_route_config/update_fetch_more_posts",{value:!1}),o.$store.commit("student_streams_page/stream_comp/update_spinner",{value:!1}),o.$store.commit("student_streams_page/student_stream_route_config/update_delete_class_post",{value:!1})):"student-classwork"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_loading_linear",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("student_classwork_page/classwork_comp/update_classwork_fetched",{value:!1})):"student-people"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_loading_linear",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("student_people_page/people_comp/update_people_data_fetched",{value:!1})):"student-view_classwork"===o.$route.name&&(o.$store.commit("student_streams_page/stream_comp/update_loading_linear",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!1}),o.$store.commit("student_view_classwork_page/classwork_details_comp/update_classwork_details_fetched",{value:!1}))),"student-stream"!==o.$route.name&&(o.is_data_loaded=!1,o.is_data_available=!0,o.loading_linear=!0,o.$store.commit("class_details/reset_data"),o.$store.commit("app_components/update_refresh_data",{value:!0}),o.$store.commit("unenroll_from_class/update_unenroll_from_class",{value:!1}))):"token_expired"===c.status?(o.$store.commit("unenroll_from_class/update_started_unenroll",{value:!1}),o.$store.commit(o.$config.VUEX_PAGE_LOADING_UPDATE_DATA,{value:!0}),"development"===(f=o.$config.environment)?(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")):"production"===f&&o.$store.commit("app_tokens/update_login_access_token",{value:null}),o.$store.commit("user_details/user_details/reset_data"),o.$store.commit("class_details/reset_data"),o.$store.commit("app_components/reset_data"),o.$store.commit("unenroll_from_class/update_unenroll_from_class",{value:!1}),o.$router.push("/login")):"success"===c.status&&(o.$store.commit("app_components/update_loading_linear",{value:!0}),"token_available"===c.value&&("development"===(h=o.$config.environment)?localStorage.setItem("access_token",c.new_access_token):"production"===h&&o.$store.commit("app_tokens/update_login_access_token",{value:c.new_access_token})),"student-stream"===(k=o.$route.name)||"student-classwork"===k||"student-people"===k||"student-view_classwork"===k?e?(o.$store.commit("class_details/update_class_data",{value:c.class_data.length}),o.$store.commit("class_details/update_class_list",{details:c.class_data}),w=o.$store.state.class_details.class_list,A=[],w.length>0?(w.forEach((function(t){t.class_code===e&&A.push(t)})),A.length>0&&1===A.length?(o.$store.commit("class_info/update_class_info",{value:A[0]}),o.$store.commit("class_id/update_class_id",{value:A[0].id}),o.$store.commit("page_loading/page_loading/update_data",{value:!1}),"student-stream"===k?o.fetch_class_posts(e,0):"student-classwork"===k?o.student_fetch_classworks(e):"student-people"===k?o.view_people(e):"student-view_classwork"===k&&(o.$route.query.id?o.student_fetch_classwork_details(e,o.$route.query.id):o.$router.push("/student/classes/"))):"Student"===o.$store.state.user_details.user_details.details.user_role?o.$router.push("/student/classes/"):"Teacher"===o.$store.state.user_details.user_details.details.user_role&&o.$router.push("/teacher/classes/")):"Student"===o.$store.state.user_details.user_details.details.user_role?o.$router.push("/student/classes/"):"Teacher"===o.$store.state.user_details.user_details.details.user_role&&o.$router.push("/teacher/classes/")):"Student"===o.$store.state.user_details.user_details.details.user_role?o.$router.push("/student/classes/"):"Teacher"===o.$store.state.user_details.user_details.details.user_role&&o.$router.push("/teacher/classes/"):function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t,r,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("student-classes"!==o.$route.name){e.next=3;break}return e.next=3,o.fetch_archived_classes(null,null,null);case 3:o.$store.commit("classes_home_page/utils/update_value",{value:!1}),t={value:!1,text:""},o.$store.commit(o.$config.VUEX_UPDATE_SNACKBAR,t),o.$store.commit("app_components/update_is_data_loaded",{value:!0}),o.$store.commit("class_details/update_class_data",{value:c.class_data.length}),c.class_data.length>0?o.$store.commit("app_components/update_is_data_available",{value:!0}):o.$store.commit("app_components/update_is_data_available",{value:!1}),o.$store.commit("class_details/update_class_list",{details:c.class_data}),r=o.$store.state.unenroll_from_class.unenroll_from_class,o.$store.commit("dialog/unenroll_dialog/unenroll_dialog/update_value",{value:!1}),o.unenroll_loading=!1,!0===r&&(_={value:!0,msg:"Unenrolled from class successfully!",err:!1},o.$store.commit(o.$config.VUEX_UPDATE_ERR_MSG_DIALOG,_),o.$store.commit("unenroll_from_class/update_unenroll_from_class",{value:!1})),"student-archived_classes"===o.$route.name&&(o.$store.commit("app_components/update_loading_linear",{value:!0}),o.fetch_archived_classes(null,null,null)),setTimeout((function(){o.$store.commit("unenroll_from_class/update_started_unenroll",{value:!1}),o.$store.commit("app_components/update_refresh_data",{value:!0}),"student-stream"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_can_create_post",{value:!0}),o.$store.commit("student_streams_page/student_stream_route_config/update_fetch_more_posts",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_spinner",{value:!1}),o.$store.commit("student_streams_page/student_stream_route_config/update_delete_class_post",{value:!0})):"student-classwork"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_loading_linear",{value:!1}),o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("student_classwork_page/classwork_comp/update_classwork_fetched",{value:!0})):"student-people"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_loading_linear",{value:!1}),o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("student_people_page/people_comp/update_people_data_fetched",{value:!0})):"student-view_classwork"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_loading_linear",{value:!1}),o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("student_view_classwork_page/classwork_details_comp/update_classwork_details_fetched",{value:!0})):("student-classes"===o.$route.name||"student-settings"===o.$route.name)&&o.$store.commit("app_components/update_loading_linear",{value:!1})}),1300);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()())):!1===l.status&&(o.$store.commit("unenroll_from_class/update_started_unenroll",{value:!1}),o.$store.commit("app_components/reset_data"),o.$store.commit("class_details/reset_data"),o.$store.commit("unenroll_from_class/update_unenroll_from_class",{value:!1}),"student-classes"===(n=o.$route.name)||"student-settings"===n||"student-archived_classes"===n?(o.$store.commit("classes_home_page/utils/update_value",{value:!0}),E={value:!0,text:"An error just occured!"},o.$store.commit(o.$config.VUEX_UPDATE_SNACKBAR,E),o.$store.commit("app_components/update_refresh_data",{value:!0}),o.$store.commit("app_components/update_loading_linear",{value:!0})):(U={value:!0,text:"An error just occured!"},o.$store.commit(o.$config.VUEX_UPDATE_SNACKBAR,U),"student-stream"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_can_create_post",{value:!1}),o.$store.commit("student_streams_page/student_stream_route_config/update_fetch_more_posts",{value:!1}),o.$store.commit("student_streams_page/stream_comp/update_spinner",{value:!1}),o.$store.commit("student_streams_page/student_stream_route_config/update_delete_class_post",{value:!1})):"student-classwork"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_loading_linear",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("student_classwork_page/classwork_comp/update_classwork_fetched",{value:!1})):"student-people"===o.$route.name?(o.$store.commit("student_streams_page/stream_comp/update_loading_linear",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("student_people_page/people_comp/update_people_data_fetched",{value:!1})):"student-view_classwork"===o.$route.name&&(o.$store.commit("student_streams_page/stream_comp/update_loading_linear",{value:!0}),o.$store.commit("student_streams_page/stream_comp/update_refresh_data",{value:!0}),o.$store.commit("student_view_classwork_page/classwork_details_comp/update_classwork_details_fetched",{value:!1})),o.$store.commit("app_components/update_loading_linear",{value:!0})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),"development"===(c=o.$config.environment)?_={method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("refresh_token"))},body:new URLSearchParams({access_token:localStorage.getItem("access_token")}),signal:o.controller.signal}:"production"===c&&(n=o.$store.state.app_tokens.login_access_token,_={method:"POST",headers:{Authorization:"Bearer ".concat(n)},signal:o.controller.signal}),"student-stream"===(m=o.$route.name)||"student-classwork"===m||"student-people"===m||"student-view_classwork"===m?l(_):"student-archived_classes"===m?!0===o.$store.state.archived_classes_page.page_comp.is_data_loaded?!0===o.$store.state.archived_classes_page.page_comp.is_data_available?(o.$store.commit("archived_classes_page/page_comp/update_is_data_loaded",{value:!0}),o.$store.commit("archived_classes_page/page_comp/update_is_data_available",{value:!0}),o.$store.commit("app_components/update_loading_linear",{value:!1})):(o.$store.commit("archived_classes_page/page_comp/update_is_data_loaded",{value:!0}),o.$store.commit("archived_classes_page/page_comp/update_is_data_available",{value:!1}),o.$store.commit("app_components/update_loading_linear",{value:!1})):(o.$store.commit("archived_classes_page/page_comp/update_archived_classes",{archived_classes:[]}),o.$store.commit("app_components/update_loading_linear",{value:!0}),o.$store.commit("archived_classes_page/page_comp/update_is_data_loaded",{value:!1}),o.$store.commit("archived_classes_page/page_comp/update_is_data_available",{value:!1}),l(_)):!0===(d=o.$store.state.app_components.is_data_loaded)?null===($=o.$store.state.app_components.is_data_available)||!1===$?(o.$store.commit("app_components/reset_data"),o.$store.commit("app_components/update_refresh_data",{value:!1}),o.$store.commit("class_details/reset_data"),l(_)):o.$store.commit("app_components/update_loading_linear",{value:!1}):!1===d&&(o.$store.commit("app_components/reset_data"),o.$store.commit("app_components/update_refresh_data",{value:!1}),o.$store.commit("class_details/reset_data"),l(_));case 7:case"end":return t.stop()}}),t)})))()}}}},567:function(e,t,o){"use strict";o(21);t.a={methods:{fetch_class_list_fetch_request:function(e){var t=this;return new Promise((function(o,r){fetch("".concat(t.$config.apiUrl,"/api/v1/student/fetch-class-details"),e).then((function(e){return e.json()})).then((function(data){o({status:!0,result:data})})).catch((function(e){o({status:!1})}))}))}}}},568:function(e,t,o){"use strict";t.a={methods:{fetch_class_list_response:function(data){if("missing_credentials"===data.status){return{status:"error",for_prod:!0,msg:"An error just occured!"}}if("error_occured"===data.status){return{status:"error",msg:"An error just occured!"}}if("token_expired"===data.status){return{status:"token_expired"}}if("details_fetched_successfully"===data.status){if("token_available"===data.token_info)return{status:"success",new_access_token:data.new_accessToken,class_data:data.details,value:"token_available"};if("no_token"===data.token_info)return{status:"success",class_data:data.details,value:"no_token"}}else{if("role_error"===data.status){return{status:"role_error"}}if("user_not_found"===data.status){return{status:"error",msg:"An error just occured!"}}if("invalid_token"===data.status){return{status:"error",msg:"An error just occured!"}}}}}}}}]);